var app=function(){"use strict";function e(){}function t(e){return e()}function n(){return Object.create(null)}function o(e){e.forEach(t)}function r(e){return"function"==typeof e}function l(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function i(e,t){e.appendChild(t)}function c(e,t,n){e.insertBefore(t,n||null)}function a(e){e.parentNode.removeChild(e)}function s(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function u(e){return document.createElement(e)}function h(e){return document.createTextNode(e)}function d(){return h(" ")}function f(e,t,n,o){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)}function p(e,t){t=""+t,e.data!==t&&(e.data=t)}let m;function v(e){m=e}const w=[],g=Promise.resolve();let C=!1;const z=[],$=[],b=[];function H(e){$.push(e)}function N(){const e=new Set;do{for(;w.length;){const e=w.shift();v(e),y(e.$$)}for(;z.length;)z.shift()();for(;$.length;){const t=$.pop();e.has(t)||(t(),e.add(t))}}while(w.length);for(;b.length;)b.pop()();C=!1}function y(e){e.fragment&&(e.update(e.dirty),o(e.before_render),e.fragment.p(e.dirty,e.ctx),e.dirty=null,e.after_render.forEach(H))}let k;function _(e,n,l){const{fragment:i,on_mount:c,on_destroy:a,after_render:s}=e.$$;i.m(n,l),H(()=>{const n=c.map(t).filter(r);a?a.push(...n):o(n),e.$$.on_mount=[]}),s.forEach(H)}function x(e,t){e.$$.dirty||(w.push(e),C||(C=!0,g.then(N)),e.$$.dirty=n()),e.$$.dirty[t]=!0}function R(t,r,l,i,c,a){const s=m;v(t);const u=r.props||{},h=t.$$={fragment:null,ctx:null,props:a,update:e,not_equal:c,bound:n(),on_mount:[],on_destroy:[],before_render:[],after_render:[],context:new Map(s?s.$$.context:[]),callbacks:n(),dirty:null};let d=!1;var f;h.ctx=l?l(t,u,(e,n)=>{h.ctx&&c(h.ctx[e],h.ctx[e]=n)&&(h.bound[e]&&h.bound[e](n),d&&x(t,e))}):u,h.update(),d=!0,o(h.before_render),h.fragment=i(h.ctx),r.target&&(r.hydrate?h.fragment.l((f=r.target,Array.from(f.childNodes))):h.fragment.c(),r.intro&&t.$$.fragment.i&&t.$$.fragment.i(),_(t,r.target,r.anchor),N()),v(s)}class q{$destroy(){var t,n;n=!0,(t=this).$$&&(o(t.$$.on_destroy),t.$$.fragment.d(n),t.$$.on_destroy=t.$$.fragment=null,t.$$.ctx={}),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(){}}function U(e,t,n){const o=Object.create(e);return o.cell=t[n],o.i=n,o}function j(e,t,n){const o=Object.create(e);return o.hintCell=t[n],o}function L(e,t,n){const o=Object.create(e);return o.rowHint=t[n],o.i=n,o}function O(e,t,n){const o=Object.create(e);return o.hintCell=t[n],o}function A(e,t,n){const o=Object.create(e);return o.colHint=t[n],o.i=n,o}function E(e){var t,n,o,r=e.hintCell.hint;return{c(){t=u("span"),n=h(r),t.className=o="hintCell "+(e.hintCell.correct&&"correct")+" svelte-8623z1"},m(e,o){c(e,t,o),i(t,n)},p(e,l){e.colHints&&r!==(r=l.hintCell.hint)&&p(n,r),e.colHints&&o!==(o="hintCell "+(l.hintCell.correct&&"correct")+" svelte-8623z1")&&(t.className=o)},d(e){e&&a(t)}}}function F(e){for(var t,n,o,r,l,h=e.colHint,f=[],p=0;p<h.length;p+=1)f[p]=E(O(e,h,p));return{c(){t=u("div"),n=u("div"),o=d();for(var i=0;i<f.length;i+=1)f[i].c();n.className="spacer svelte-8623z1",t.className=r="columnHint "+(e.i===e.hoverColumn?"hover":"")+" svelte-8623z1",t.title=l="groups: "+e.colHint.length+", sum: "+e.colHint.reduce(P,0)},m(e,r){c(e,t,r),i(t,n),i(t,o);for(var l=0;l<f.length;l+=1)f[l].m(t,null)},p(e,n){if(e.colHints){h=n.colHint;for(var o=0;o<h.length;o+=1){const r=O(n,h,o);f[o]?f[o].p(e,r):(f[o]=E(r),f[o].c(),f[o].m(t,null))}for(;o<f.length;o+=1)f[o].d(1);f.length=h.length}e.hoverColumn&&r!==(r="columnHint "+(n.i===n.hoverColumn?"hover":"")+" svelte-8623z1")&&(t.className=r),e.colHints&&l!==(l="groups: "+n.colHint.length+", sum: "+n.colHint.reduce(P,0))&&(t.title=l)},d(e){e&&a(t),s(f,e)}}}function M(e){var t,n,o,r=e.hintCell.hint;return{c(){t=u("span"),n=h(r),t.className=o="hintCell "+(e.hintCell.correct&&"correct")+" svelte-8623z1"},m(e,o){c(e,t,o),i(t,n)},p(e,l){e.rowHints&&r!==(r=l.hintCell.hint)&&p(n,r),e.rowHints&&o!==(o="hintCell "+(l.hintCell.correct&&"correct")+" svelte-8623z1")&&(t.className=o)},d(e){e&&a(t)}}}function T(e){for(var t,n,o,r=e.rowHint,l=[],i=0;i<r.length;i+=1)l[i]=M(j(e,r,i));return{c(){t=u("div");for(var r=0;r<l.length;r+=1)l[r].c();t.className=n="rowHint "+(e.i===e.hoverRow?"hover":"")+" svelte-8623z1",t.title=o="groups: "+e.rowHint.length+", sum: "+e.rowHint.reduce(S,0)},m(e,n){c(e,t,n);for(var o=0;o<l.length;o+=1)l[o].m(t,null)},p(e,i){if(e.rowHints){r=i.rowHint;for(var c=0;c<r.length;c+=1){const n=j(i,r,c);l[c]?l[c].p(e,n):(l[c]=M(n),l[c].c(),l[c].m(t,null))}for(;c<l.length;c+=1)l[c].d(1);l.length=r.length}e.hoverRow&&n!==(n="rowHint "+(i.i===i.hoverRow?"hover":"")+" svelte-8623z1")&&(t.className=n),e.rowHints&&o!==(o="groups: "+i.rowHint.length+", sum: "+i.rowHint.reduce(S,0))&&(t.title=o)},d(e){e&&a(t),s(l,e)}}}function Z(e){var t,n,r,l,s,h;function p(...t){return e.mousedown_handler(e,...t)}function m(){return e.mouseover_handler(e)}return{c(){t=u("div"),n=u("div"),l=d(),n.className=r=(3===e.cell?"blue":2===e.cell?"red":1===e.cell?"black":"white")+" svelte-8623z1",t.className=s="qrCell "+(e.cell?"black":"")+" svelte-8623z1",h=[f(t,"mousedown",p),f(t,"contextmenu",B),f(t,"mouseover",m)]},m(e,o){c(e,t,o),i(t,n),i(t,l)},p(o,l){e=l,o.flatCode&&r!==(r=(3===e.cell?"blue":2===e.cell?"red":1===e.cell?"black":"white")+" svelte-8623z1")&&(n.className=r),o.flatCode&&s!==(s="qrCell "+(e.cell?"black":"")+" svelte-8623z1")&&(t.className=s)},d(e){e&&a(t),o(h)}}}function D(t){for(var n,o,r,l,h,p,m,v,w,g=t.colHints,C=[],z=0;z<g.length;z+=1)C[z]=F(A(t,g,z));var $=t.rowHints,b=[];for(z=0;z<$.length;z+=1)b[z]=T(L(t,$,z));var H=t.flatCode,N=[];for(z=0;z<H.length;z+=1)N[z]=Z(U(t,H,z));return{c(){n=u("div"),o=u("div"),r=d(),l=u("div");for(var e=0;e<C.length;e+=1)C[e].c();h=d(),p=u("div");for(e=0;e<b.length;e+=1)b[e].c();m=d(),v=u("div");for(e=0;e<N.length;e+=1)N[e].c();o.className="corner svelte-8623z1",l.className="columnHints svelte-8623z1",p.className="rowHints svelte-8623z1",v.className="qrGrid svelte-8623z1",n.className="nonoGrid svelte-8623z1",w=f(v,"mouseout",t.mouseout_handler)},m(e,t){c(e,n,t),i(n,o),i(n,r),i(n,l);for(var a=0;a<C.length;a+=1)C[a].m(l,null);i(n,h),i(n,p);for(a=0;a<b.length;a+=1)b[a].m(p,null);i(n,m),i(n,v);for(a=0;a<N.length;a+=1)N[a].m(v,null)},p(e,t){if(e.hoverColumn||e.colHints){g=t.colHints;for(var n=0;n<g.length;n+=1){const o=A(t,g,n);C[n]?C[n].p(e,o):(C[n]=F(o),C[n].c(),C[n].m(l,null))}for(;n<C.length;n+=1)C[n].d(1);C.length=g.length}if(e.hoverRow||e.rowHints){$=t.rowHints;for(n=0;n<$.length;n+=1){const o=L(t,$,n);b[n]?b[n].p(e,o):(b[n]=T(o),b[n].c(),b[n].m(p,null))}for(;n<b.length;n+=1)b[n].d(1);b.length=$.length}if(e.flatCode){H=t.flatCode;for(n=0;n<H.length;n+=1){const o=U(t,H,n);N[n]?N[n].p(e,o):(N[n]=Z(o),N[n].c(),N[n].m(v,null))}for(;n<N.length;n+=1)N[n].d(1);N.length=H.length}},i:e,o:e,d(e){e&&a(n),s(C,e),s(b,e),s(N,e),w()}}}function G(e){return e.reduce((e,t)=>(1===t?e[e.length-1]+=1:e[e.length-1]>0&&e.push(0),e),[0]).filter(e=>e)}function P(e,t){return e+t.hint}function S(e,t){return e+t.hint}function B(e){return e.preventDefault()}function W(e,t,n){let{baseCode:o=[],puzzleCode:r}=t,l=o.map(G),i=o.map((e,t)=>e.map((e,n)=>o[n][t])).map(G),c=[...o.map(e=>[...e.map(e=>0)])];window.cheat=(()=>{n("code",c=[...o.map(e=>[...e.map(e=>e)])])});let a,s,u,h,d,f,p,m=void 0;function v(e,t){e.preventDefault();const r=Math.floor(t/o.length),l=t%o[r].length,i=c[r][l];1===e.button?(c[r][l]=3===i?0:3,n("code",c)):2===e.button?(c[r][l]=2===i?0:2,n("code",c)):(c[r][l]=1===i?0:1,n("code",c))}function w(e){n("hoverCell",m=e)}return e.$set=(e=>{"baseCode"in e&&n("baseCode",o=e.baseCode),"puzzleCode"in e&&n("puzzleCode",r=e.puzzleCode)}),e.$$.update=((e={code:1,baseRowHints:1,currRowHints:1,baseColHints:1,currColHints:1,hoverCell:1,baseCode:1,hoverRow:1})=>{e.code&&n("currRowHints",a=c.map(G)),(e.baseRowHints||e.currRowHints)&&n("rowHints",s=l.map((e,t)=>e.map((e,n)=>({hint:e,correct:e===a[t][n]})).reduce(({rest:e,soFar:t},n)=>({rest:e.concat({hint:n.hint,correct:t&&n.correct}),soFar:t&&n.correct}),{rest:[],soFar:!0}).rest)),e.code&&n("currColHints",u=c.map((e,t)=>e.map((e,n)=>c[n][t])).map(G)),(e.baseColHints||e.currColHints)&&n("colHints",h=i.map((e,t)=>e.map((e,n)=>({hint:e,correct:e===u[t][n]})).reduce(({rest:e,soFar:t},n)=>({rest:e.concat({hint:n.hint,correct:t&&n.correct}),soFar:t&&n.correct}),{rest:[],soFar:!0}).rest)),e.code&&n("flatCode",d=c.reduce((e,t)=>e.concat(...t),[])),(e.hoverCell||e.baseCode)&&n("hoverRow",f=void 0!==m?Math.floor(m/o.length):void 0),(e.hoverCell||e.baseCode||e.hoverRow)&&n("hoverColumn",p=void 0!==m?m%o[f].length:void 0)}),{baseCode:o,puzzleCode:r,toggleCell:v,setHoverCell:w,undefined:void 0,rowHints:s,colHints:h,flatCode:d,hoverRow:f,hoverColumn:p,mousedown_handler:function({i:e},t){return v(t,e)},mouseover_handler:function({i:e}){return w(e)},mouseout_handler:function(){return w(void 0)}}}class I extends q{constructor(e){super(),R(this,e,W,D,l,["baseCode","puzzleCode"])}}function J(e){var t,n,o,r,l,s,f,m,v,w,g,C,z,$,b=new I({props:{baseCode:e.qrCode,puzzleCode:e.puzzleCode}});return{c(){(t=u("h1")).textContent="ngrm.link",n=d(),o=u("p"),r=h("want to share this puzzle with a friend? it's available at\n      "),l=u("a"),s=h(e.puzzleUrl),f=d(),b.$$.fragment.c(),m=d(),(v=u("h3")).textContent="controls",w=d(),(g=u("ul")).innerHTML="<li>left click: mark a square as correct</li>\n\t\t\t      <li>\n\t\t\t        right click: mark a square with a red hint (for personal purposes)\n\t\t\t      </li>\n\t\t\t      <li>\n\t\t\t        middle click: mark a square with a blue hint (for personal purposes)\n\t\t\t      </li>",C=d(),(z=u("p")).innerHTML="\n\t\t\t      don't know what this is?\n\t\t\t      <a href=\"https://en.wikipedia.org/wiki/Nonogram\">\n\t\t\t        here's the wikipedia page on nonograms.\n\t\t\t      </a>",t.className="svelte-1rhfiwv",l.href=e.puzzleUrl,o.className="svelte-1rhfiwv",z.className="svelte-1rhfiwv"},m(e,a){c(e,t,a),c(e,n,a),c(e,o,a),i(o,r),i(o,l),i(l,s),c(e,f,a),_(b,e,a),c(e,m,a),c(e,v,a),c(e,w,a),c(e,g,a),c(e,C,a),c(e,z,a),$=!0},p(e,t){$&&!e.puzzleUrl||(p(s,t.puzzleUrl),l.href=t.puzzleUrl);var n={};e.qrCode&&(n.baseCode=t.qrCode),e.puzzleCode&&(n.puzzleCode=t.puzzleCode),b.$set(n)},i(e){$||(b.$$.fragment.i(e),$=!0)},o(e){b.$$.fragment.o(e),$=!1},d(e){e&&(a(t),a(n),a(o),a(f)),b.$destroy(e),e&&(a(m),a(v),a(w),a(g),a(C),a(z))}}}function K(t){var n,r,l,s,m,v,w,g,C,z,$,b,H,N,y;return{c(){var e,o,i;(n=u("h1")).textContent="ngrm.link",r=d(),(l=u("p")).textContent="a link shortener for when plaintext would just be too easy.",s=d(),m=u("p"),(v=u("label")).textContent="enter a URL to shorten:",w=d(),g=u("span"),C=u("input"),z=d(),($=u("button")).textContent="generate!",b=d(),H=u("p"),N=h(t.warning),n.className="svelte-1rhfiwv",l.className="svelte-1rhfiwv",e=C,o="type",null==(i="text")?e.removeAttribute(o):e.setAttribute(o,i),C.className="svelte-1rhfiwv",H.className="svelte-1rhfiwv",m.className="form svelte-1rhfiwv",y=[f(C,"input",t.input_input_handler),f($,"click",t.generate)]},m(e,o){c(e,n,o),c(e,r,o),c(e,l,o),c(e,s,o),c(e,m,o),i(m,v),i(m,w),i(m,g),i(g,C),C.value=t.url,i(g,z),i(g,$),i(g,b),i(g,H),i(H,N)},p(e,t){e.url&&C.value!==t.url&&(C.value=t.url),e.warning&&p(N,t.warning)},i:e,o:e,d(e){e&&(a(n),a(r),a(l),a(s),a(m)),o(y)}}}function Q(e){var t,n,r,l,i=[K,J],s=[];function h(e){return e.puzzleCode===e.undefined?0:1}return n=h(e),r=s[n]=i[n](e),{c(){t=u("article"),r.c(),t.className="svelte-1rhfiwv"},m(e,o){c(e,t,o),s[n].m(t,null),l=!0},p(e,l){var c,a=n;(n=h(l))===a?s[n].p(e,l):(c=(()=>{s[a].d(1),s[a]=null}),(k={remaining:0,callbacks:[]}).callbacks.push(c),r.o(1),k.remaining||o(k.callbacks),(r=s[n])||(r=s[n]=i[n](l)).c(),r.i(1),r.m(t,null))},i(e){l||(r&&r.i(),l=!0)},o(e){r&&r.o(),l=!1},d(e){e&&a(t),s[n].d()}}}const V="http://138.197.201.150:4567";function X(e,t,n){let o="",r="",l=void 0,i=void 0,c=void 0;if(window.location.hash)if(9===window.location.hash.length){const e=window.location.hash.slice(1);n("warning",r="navigating..."),fetch(V+"/link/"+e).then(e=>(console.log(e),e.json())).then(e=>{const t=e.url;window.location.replace(t)}).catch(e=>{console.error(e),n("warning",r="whoops, there was an error while going to your URL. sorry.")})}else if(window.location.hash.startsWith("#puzzle=")){const e=window.location.hash.slice("#puzzle=".length);fetch(V+"/puzzle/"+e).then(e=>(console.log(e),e.json())).then(t=>{n("qrCode",i=t.qrCode),n("puzzleCode",l=e),n("puzzleUrl",c=window.location.href)}).catch(e=>{console.error(e),n("warning",r="whoops, there was an error while opening the puzzle. sorry.")})}function a(e){n("puzzleCode",l=e.puzzleCode),n("qrCode",i=e.qrCode),window.location.hash="puzzle="+l,n("puzzleUrl",c=window.location.href)}return{url:o,warning:r,puzzleCode:l,qrCode:i,puzzleUrl:c,generate:function(){if(!o)return void n("warning",r="please enter a URL");o.match(/((([A-Za-z]{3,9}:(?:\/\/)?)(?:[-;:&=\+\$,\w]+@)?[A-Za-z0-9.-]+|(?:www.|[-;:&=\+\$,\w]+@)[A-Za-z0-9.-]+)((?:\/[\+~%\/.\w-_]*)?\??(?:[-\+=&;%@.\w_]*)#?(?:[\w]*))?)/)?(n("warning",r="creating..."),fetch(V+"/link",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"link="+o}).then(e=>(console.log(e),e.json())).then(a).catch(e=>{console.error(e),n("warning",r="whoops, there was an error while creating your puzzle. sorry.")})):n("warning",r="make sure to use a well-formed URL. and if you're not, make sure to put http/https/etc at the beginning too.")},undefined:void 0,input_input_handler:function(){o=this.value,n("url",o)}}}return new class extends q{constructor(e){super(),R(this,e,X,Q,l,[])}}({target:document.body,props:{name:"world 22"}})}();
//# sourceMappingURL=bundle.js.map
